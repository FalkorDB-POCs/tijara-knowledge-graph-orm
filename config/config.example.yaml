# Tijara Knowledge Graph Configuration

# FalkorDB Connection
falkordb:
  host: "localhost"
  port: 6379
  graph_name: "tijara_kg"
  username: null
  password: null
  ssl: false
  max_connections: 50
  timeout: 30
  
# Graphiti Configuration
graphiti:
  llm_provider: "openai"
  llm_model: "gpt-4-turbo-preview"
  embedding_model: "text-embedding-3-large"
  embedding_dimensions: 3072
  temperature: 0.1
  max_tokens: 4096
  enable_cache: true
  
# OpenAI API
openai:
  api_key: "${OPENAI_API_KEY}"
  organization: null
  
# API Server
api:
  host: "0.0.0.0"
  port: 8000
  reload: true
  workers: 4
  log_level: "info"
  cors_origins:
    - "http://localhost:3000"
    - "https://ldc-internal.com"
  
# Redis Cache (not currently used)
# redis:
#   host: "localhost"
#   port: 6379
#   db: 1
#   password: null
#   ttl: 3600  # 1 hour default cache TTL
  
# Data Ingestion
ingestion:
  batch_size: 1000
  enable_validation: true
  enable_deduplication: true
  retain_history: true
  max_retries: 3
  
  # Data Source Connectors
  sources:
    snd:
      enabled: true
      api_url: "${SND_API_URL}"
      api_key: "${SND_API_KEY}"
      sync_interval: "daily"
      
    tradeflows:
      enabled: true
      api_url: "${TRADEFLOWS_API_URL}"
      api_key: "${TRADEFLOWS_API_KEY}"
      sync_interval: "daily"
      
    mars:
      enabled: true
      api_url: "${MARS_API_URL}"
      api_key: "${MARS_API_KEY}"
      sync_interval: "weekly"
      
    usda:
      enabled: true
      api_url: "${USDA_API_URL}"
      api_key: "${USDA_API_KEY}"
      sync_interval: "weekly"
      
    crop_monitor:
      enabled: true
      api_url: "${CROP_MONITOR_API_URL}"
      sync_interval: "daily"
      
    cadi:
      enabled: true
      database_url: "${CADI_DB_URL}"
      sync_interval: "hourly"

# Graph Analytics
analytics:
  max_depth: 5  # Maximum traversal depth
  page_size: 100
  enable_parallel: true
  cache_results: true
  
  # Algorithm-specific settings
  algorithms:
    pagerank:
      iterations: 100
      damping: 0.85
    
    community:
      resolution: 1.0
      algorithm: "louvain"

# GraphRAG
rag:
  chunk_size: 1000
  chunk_overlap: 200
  retrieval_top_k: 10
  rerank: true
  min_relevance_score: 0.7
  enable_hybrid_search: true
  
# Spatial Operations
spatial:
  default_crs: "EPSG:4326"  # WGS84
  buffer_distance: 10  # km
  intersection_threshold: 0.1
  
# Logging
logging:
  level: "INFO"
  format: "json"
  output: "stdout"
  file: null
  rotation: "daily"
  retention: 30  # days
  
# Monitoring (Prometheus not currently used)
monitoring:
  enable_metrics: false
  # prometheus_port: 9090
  health_check_interval: 60  # seconds
  
# Security
security:
  enable_auth: true
  jwt_secret: "${JWT_SECRET}"
  jwt_algorithm: "HS256"
  token_expiry: 3600  # 1 hour
  
# Features
features:
  enable_graphql: false  # GraphQL not currently implemented
  enable_websocket: false  # WebSocket not currently implemented
  enable_batch_queries: true
  enable_impact_analysis: true
  enable_spatial_queries: true
